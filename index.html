<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>Cloudbet - API Reference</title>
    <style>
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight, .highlight .w {
  color: #f8f8f2;
  background-color: #272822;
}
.highlight .err {
  color: #272822;
  background-color: #f92672;
}
.highlight .c, .highlight .cd, .highlight .cm, .highlight .c1, .highlight .cs {
  color: #75715e;
}
.highlight .cp {
  color: #f4bf75;
}
.highlight .nt {
  color: #f4bf75;
}
.highlight .o, .highlight .ow {
  color: #f8f8f2;
}
.highlight .p, .highlight .pi {
  color: #f8f8f2;
}
.highlight .gi {
  color: #a6e22e;
}
.highlight .gd {
  color: #f92672;
}
.highlight .gh {
  color: #66d9ef;
  background-color: #272822;
  font-weight: bold;
}
.highlight .k, .highlight .kn, .highlight .kp, .highlight .kr, .highlight .kv {
  color: #ae81ff;
}
.highlight .kc {
  color: #fd971f;
}
.highlight .kt {
  color: #fd971f;
}
.highlight .kd {
  color: #fd971f;
}
.highlight .s, .highlight .sb, .highlight .sc, .highlight .sd, .highlight .s2, .highlight .sh, .highlight .sx, .highlight .s1 {
  color: #a6e22e;
}
.highlight .sr {
  color: #a1efe4;
}
.highlight .si {
  color: #cc6633;
}
.highlight .se {
  color: #cc6633;
}
.highlight .nn {
  color: #f4bf75;
}
.highlight .nc {
  color: #f4bf75;
}
.highlight .no {
  color: #f4bf75;
}
.highlight .na {
  color: #66d9ef;
}
.highlight .m, .highlight .mf, .highlight .mh, .highlight .mi, .highlight .il, .highlight .mo, .highlight .mb, .highlight .mx {
  color: #a6e22e;
}
.highlight .ss {
  color: #a6e22e;
}
    </style>
    <link href="stylesheets/screen.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print.css" rel="stylesheet" media="print" />
      <script src="javascripts/all.js"></script>
    <link href="images/favicon.ico" rel="icon" type="image/ico" />
  </head>

  <body class="index" data-languages="[&quot;php&quot;]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar.png" alt="Navbar" />
      </span>
    </a>
    <div class="tocify-wrapper">
      <img src="images/logo.png" alt="Logo" />
        <div class="lang-selector">
              <a href="#" data-language-name="php">php</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <div id="toc">
      </div>
        <ul class="toc-footer">
            <li><a href='https://affiliates.cloudbet.com/en/affiliates/sign_up'>Sign Up for a Developer Key</a></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        
          <h1 id="introduction">Introduction</h1>

<p>Welcome to the Cloudbet API! You can use our API to retrieve current odds data for all of our events.</p>

<p>You can view the source code for this documentation on <a href="https://github.com/cloudbet/docs">github</a>.</p>

<p>You can find the schema definition <a href="https://github.com/Cloudbet/schema">here</a> and post issues with the API <a href="https://github.com/Cloudbet/schema/issues">here</a>.</p>

          <h1 id="data-schema-protobuf">Data Schema (Protobuf)</h1>

<p>We use <a href="https://developers.google.com/protocolbuffers">Google Protocol Buffers</a> or Protobuf to define our data schema. Protobuf provides bindings to generate classes in most programming languages. This is the preferred method for accessing our APIs since once you use Protobuf you can benefit from the performance benefits of Protobuf. You can request JSON instead but you&rsquo;ll lose the benefits of using binary.</p>

<h2 id="installing-protobuf">Installing Protobuf</h2>

<h3 id="debian-ubuntu">Debian/Ubuntu</h3>

<aside>
apt-get install protobuf-compiler
</aside>

<h3 id="macos">MacOS:</h3>

<aside>
brew install protobuf
</aside>

<h2 id="language-specific-bindings">Language specific bindings</h2>

<pre class="highlight php"><code><span class="cp">&lt;?php</span>
<span class="c1">// Simple autoloader for generated protobuf classes
</span><span class="nb">spl_autoload_register</span><span class="p">(</span><span class="k">function</span> <span class="p">(</span><span class="nv">$className</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nv">$className</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s1">'\\'</span><span class="p">)</span> <span class="p">{</span>
        <span class="nv">$className</span> <span class="o">=</span> <span class="nb">substr</span><span class="p">(</span><span class="nv">$className</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="k">if</span> <span class="p">(</span><span class="nb">strpos</span><span class="p">(</span><span class="nv">$className</span><span class="p">,</span> <span class="s1">'Sportsbook\\'</span><span class="p">)</span> <span class="o">===</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
        <span class="nv">$fileName</span> <span class="o">=</span> <span class="nx">__DIR__</span> <span class="o">.</span> <span class="s1">'/'</span> <span class="o">.</span> <span class="nb">strtr</span><span class="p">(</span><span class="nv">$className</span><span class="p">,</span> <span class="s1">'\\'</span><span class="p">,</span> <span class="nx">DIRECTORY_SEPARATOR</span><span class="p">)</span> <span class="o">.</span> <span class="s1">'.php'</span><span class="p">;</span>      
        <span class="k">if</span> <span class="p">(</span><span class="nb">file_exists</span><span class="p">(</span><span class="nv">$fileName</span><span class="p">))</span> <span class="p">{</span>
            <span class="k">include</span> <span class="nv">$fileName</span><span class="p">;</span>

            <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">});</span>

<span class="c1"># https://github.com/Cloudbet/schema/tree/master/php/helpers
</span><span class="k">require_once</span> <span class="nx">__DIR__</span> <span class="o">.</span> <span class="s1">'/helpers/TableRenderer.php'</span><span class="p">;</span>

</code></pre>

<p>Our Protobuf schema can be found on <a href="https://github.com/Cloudbet/schema">Github</a></p>

<p>Check one of the sample scripts to <code class="prettyprint">gen-*.sh</code> in order to generate accessors for your required language as below.</p>

<h4 id="ruby">Ruby:</h4>

<aside>
gem install protobuf
</aside>

<h4 id="go">Go:</h4>

<aside>
go get github.com/golang/protobuf/proto<br/>
go get github.com/golang/protobuf/protoc-gen-go
</aside>

<h4 id="python">Python:</h4>

<aside>
export PYTHONPATH=~/python<br/>
easy_install -d ~/python protobuf
</aside>

<h4 id="php">PHP:</h4>

<p>Install <a href="https://github.com/allegro/php-protobuf">this</a> protobuf PHP extension as described in the project&rsquo;s README.</p>

<aside>
./gen-php.sh /path/to/php-protobuf/protoc-gen-php.php
</aside>

<p>This will create the PHP proto files in the php directory. You can then run example.php in the root directory to see most of the API requests in action.</p>

<aside>
php example.php
</aside>

<p>n.b. This was tested using <a href="https://github.com/phpbrew/phpbrew">phpbrew</a> and PHP version 5.6.18 (7+ is not supported yet).</p>

          <h1 id="authentication">Authentication</h1>

<pre class="highlight php"><code><span class="cp">&lt;?php</span>
<span class="k">require_once</span> <span class="nx">__DIR__</span> <span class="o">.</span> <span class="s1">'/protobuf.php'</span><span class="p">;</span>

<span class="nb">define</span><span class="p">(</span><span class="s1">'JWT_TOKEN'</span><span class="p">,</span> <span class="s1">'Paste your api key'</span><span class="p">);</span>

<span class="c1">// Simple function to obtain the API response
</span><span class="k">function</span> <span class="nf">getApiResponse</span><span class="p">(</span><span class="nv">$method</span> <span class="o">=</span> <span class="s1">''</span><span class="p">,</span> <span class="nv">$isBinary</span> <span class="o">=</span> <span class="kc">true</span><span class="p">)</span>
<span class="p">{</span>
    <span class="nv">$ch</span> <span class="o">=</span> <span class="nb">curl_init</span><span class="p">();</span>
    <span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_HEADER</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
    <span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_RETURNTRANSFER</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
    <span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_USERAGENT</span><span class="p">,</span> <span class="s1">'Public API Client/1.0'</span><span class="p">);</span>
    <span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_URL</span><span class="p">,</span> <span class="s1">'https://api.cloudbet.com/api/v1/sports'</span> <span class="o">.</span> <span class="p">(</span><span class="nv">$method</span> <span class="o">===</span> <span class="s1">''</span> <span class="o">?</span> <span class="s1">''</span> <span class="o">:</span> <span class="s1">'/'</span><span class="p">)</span> <span class="o">.</span> <span class="nv">$method</span><span class="p">);</span>
    <span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_HTTPHEADER</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">'Accept: application/'</span> <span class="o">.</span> <span class="p">(</span><span class="nv">$isBinary</span> <span class="o">?</span> <span class="s1">'octet-stream'</span> <span class="o">:</span> <span class="s1">'json'</span><span class="p">),</span>
        <span class="s1">'Authorization: Bearer '</span> <span class="o">.</span> <span class="nx">JWT_TOKEN</span><span class="p">,</span>
    <span class="p">));</span>
    <span class="nv">$response</span> <span class="o">=</span> <span class="nb">curl_exec</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>
    <span class="nv">$code</span> <span class="o">=</span> <span class="nb">curl_getinfo</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLINFO_HTTP_CODE</span><span class="p">);</span>
    <span class="nb">curl_close</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>

    <span class="k">if</span> <span class="p">(</span><span class="nv">$code</span> <span class="o">!==</span> <span class="mi">200</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">throw</span> <span class="k">new</span> <span class="nx">Exception</span><span class="p">(</span><span class="s1">'Response with error code '</span> <span class="o">.</span> <span class="nv">$code</span> <span class="o">.</span> <span class="s1">' received'</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nv">$isBinary</span><span class="p">)</span> <span class="p">{</span>
        <span class="nv">$response</span> <span class="o">=</span> <span class="nb">json_decode</span><span class="p">(</span><span class="nv">$response</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nb">is_array</span><span class="p">(</span><span class="nv">$response</span><span class="p">))</span> <span class="p">{</span>
            <span class="k">throw</span> <span class="k">new</span> <span class="nx">Exception</span><span class="p">(</span><span class="s1">'Invalid response received'</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="nv">$response</span><span class="p">;</span>
<span class="p">}</span>

</code></pre>

<p>The Cloudbet API uses JSON Web Tokens or <a href="https://jwt.io">JWTs</a> to allow secure access to the API.</p>

<p>You can register for an API key at our <a href="https://affiliates.cloudbet.com/en/affiliates/sign_up">affiliate portal</a>.</p>

<p>Our API expects for the API key to be included in all API requests to the server in a HTTP header that looks like the following:</p>

<p><code class="prettyprint">Authorization: bearer TOKEN</code></p>

<aside class="notice">
You must replace <code>TOKEN</code> with your personal API key.
</aside>

          <h1 id="sports">Sports</h1>

<pre class="highlight php"><code><span class="cp">&lt;?php</span>
<span class="k">require_once</span> <span class="nx">__DIR__</span> <span class="o">.</span> <span class="s1">'/authentication.php'</span><span class="p">;</span>

<span class="c1">// Sports
// Endpoint: /api/v1/sports
</span>
<span class="nv">$sportsList</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">\Sportsbook\SportsList</span><span class="p">();</span>

<span class="k">try</span> <span class="p">{</span>
    <span class="nv">$sportsList</span><span class="o">-&gt;</span><span class="na">parseFromString</span><span class="p">(</span><span class="nx">getApiResponse</span><span class="p">());</span>
<span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">Exception</span> <span class="nv">$e</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">die</span><span class="p">(</span><span class="s1">'Unable to get sports: '</span> <span class="o">.</span> <span class="nv">$e</span><span class="o">-&gt;</span><span class="na">getMessage</span><span class="p">()</span> <span class="o">.</span> <span class="nx">PHP_EOL</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nv">$sportsList</span><span class="o">-&gt;</span><span class="na">getSportsCount</span><span class="p">())</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="s1">'No sports were found'</span> <span class="o">.</span> <span class="nx">PHP_EOL</span><span class="p">;</span>
<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="s1">'Sports list'</span> <span class="o">.</span> <span class="nx">PHP_EOL</span><span class="p">;</span>
    <span class="nv">$renderer</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">TableRenderer</span><span class="p">(</span><span class="k">array</span><span class="p">(</span>
        <span class="s1">'ID'</span><span class="p">,</span>
        <span class="s1">'Key'</span><span class="p">,</span>
        <span class="s1">'Name'</span><span class="p">,</span>
    <span class="p">));</span>
    <span class="k">foreach</span> <span class="p">(</span><span class="nv">$sportsList</span><span class="o">-&gt;</span><span class="na">getSports</span><span class="p">()</span> <span class="k">as</span> <span class="nv">$sport</span><span class="p">)</span> <span class="p">{</span>
        <span class="nv">$renderer</span><span class="o">-&gt;</span><span class="na">row</span><span class="p">(</span><span class="k">array</span><span class="p">(</span>
            <span class="nv">$sport</span><span class="o">-&gt;</span><span class="na">getId</span><span class="p">(),</span>
            <span class="nv">$sport</span><span class="o">-&gt;</span><span class="na">getKey</span><span class="p">(),</span>
            <span class="nv">$sport</span><span class="o">-&gt;</span><span class="na">getName</span><span class="p">(),</span>
        <span class="p">));</span>
    <span class="p">}</span>
    <span class="nv">$renderer</span><span class="o">-&gt;</span><span class="na">end</span><span class="p">();</span>
<span class="p">}</span>

</code></pre>

<p>The Sports end point is important for understand all the other calls you&rsquo;ll make to the API.</p>

<p>To improve performance most end points will return sport ids rather than names.</p>

<p>To understand which ids are which sport you&rsquo;ll need to parse the response of this API first.</p>

          <h1 id="markets">Markets</h1>

<pre class="highlight php"><code><span class="cp">&lt;?php</span>
<span class="k">require_once</span> <span class="nx">__DIR__</span> <span class="o">.</span> <span class="s1">'/authentication.php'</span><span class="p">;</span>

<span class="c1">// Markets
// Endpoint: /api/v1/sports/markets
</span>
<span class="nv">$markets</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
<span class="k">try</span> <span class="p">{</span>
    <span class="nv">$markets</span> <span class="o">=</span> <span class="nx">getApiResponse</span><span class="p">(</span><span class="s1">'markets'</span><span class="p">,</span> <span class="kc">false</span><span class="p">);</span>
<span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">Exception</span> <span class="nv">$e</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">die</span><span class="p">(</span><span class="s1">'Unable to get markets: '</span> <span class="o">.</span> <span class="nv">$e</span><span class="o">-&gt;</span><span class="na">getMessage</span><span class="p">()</span> <span class="o">.</span> <span class="nx">PHP_EOL</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nv">$markets</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="s1">'No markets were found'</span> <span class="o">.</span> <span class="nx">PHP_EOL</span><span class="p">;</span>
<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="s1">'Markets'</span> <span class="o">.</span> <span class="nx">PHP_EOL</span><span class="p">;</span>
    <span class="nv">$renderer</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">TableRenderer</span><span class="p">(</span><span class="k">array</span><span class="p">(</span>
        <span class="s1">'ID'</span><span class="p">,</span>
        <span class="s1">'Name'</span><span class="p">,</span>
    <span class="p">));</span>
    <span class="k">foreach</span> <span class="p">(</span><span class="nv">$markets</span> <span class="k">as</span> <span class="nv">$market</span><span class="p">)</span> <span class="p">{</span>
        <span class="nv">$renderer</span><span class="o">-&gt;</span><span class="na">row</span><span class="p">(</span><span class="k">array</span><span class="p">(</span>
            <span class="nv">$market</span><span class="p">[</span><span class="s1">'id'</span><span class="p">],</span>
            <span class="nv">$market</span><span class="p">[</span><span class="s1">'name'</span><span class="p">],</span>
        <span class="p">));</span>
    <span class="p">}</span>
    <span class="nv">$renderer</span><span class="o">-&gt;</span><span class="na">end</span><span class="p">();</span>
<span class="p">}</span>

</code></pre>

<p>The Markets end point is important for understand all the other calls you&rsquo;ll make to the API.</p>

<p>To improve performance most end points will return market ids rather than names.</p>

<p>To understand which ids are which market you&rsquo;ll need to parse the response of this API first.</p>

          <h1 id="event-tree">Event Tree</h1>

<pre class="highlight php"><code><span class="cp">&lt;?php</span>
<span class="k">require_once</span> <span class="nx">__DIR__</span> <span class="o">.</span> <span class="s1">'/authentication.php'</span><span class="p">;</span>

<span class="c1">// Event Tree
// Endpoint: /api/v1/event_tree
</span>
<span class="nv">$eventTree</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">\Sportsbook\EventTree</span><span class="p">();</span>

<span class="k">try</span> <span class="p">{</span>
    <span class="nv">$eventTree</span><span class="o">-&gt;</span><span class="na">parseFromString</span><span class="p">(</span><span class="nx">getApiResponse</span><span class="p">(</span><span class="s1">'event_tree'</span><span class="p">));</span>
<span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">Exception</span> <span class="nv">$e</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">die</span><span class="p">(</span><span class="s1">'Unable to get event tree: '</span> <span class="o">.</span> <span class="nv">$e</span><span class="o">-&gt;</span><span class="na">getMessage</span><span class="p">()</span> <span class="o">.</span> <span class="nx">PHP_EOL</span><span class="p">);</span>
<span class="p">}</span>
<span class="k">foreach</span> <span class="p">(</span><span class="nv">$eventTree</span><span class="o">-&gt;</span><span class="na">getSports</span><span class="p">()</span> <span class="k">as</span> <span class="nv">$sport</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$competitionsCount</span> <span class="o">=</span> <span class="nv">$sport</span><span class="o">-&gt;</span><span class="na">getCompetitionsCount</span><span class="p">();</span>
    <span class="k">echo</span> <span class="p">(</span><span class="nv">$competitionsCount</span> <span class="o">?</span> <span class="s1">'+'</span> <span class="o">:</span> <span class="s1">'-'</span><span class="p">)</span> <span class="o">.</span> <span class="s1">'- Sport '</span> <span class="o">.</span> <span class="p">(</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$sportNames</span><span class="p">)</span> <span class="o">?</span> <span class="s1">'"'</span> <span class="o">.</span> <span class="nv">$sportNames</span><span class="p">[</span><span class="nv">$sport</span><span class="o">-&gt;</span><span class="na">getId</span><span class="p">()]</span> <span class="o">.</span> <span class="s1">'"'</span> <span class="o">:</span> <span class="s1">'#'</span> <span class="o">.</span> <span class="nv">$sport</span><span class="o">-&gt;</span><span class="na">getId</span><span class="p">())</span> <span class="o">.</span> <span class="nx">PHP_EOL</span><span class="p">;</span>
    <span class="k">foreach</span> <span class="p">(</span><span class="nv">$sport</span><span class="o">-&gt;</span><span class="na">getCompetitions</span><span class="p">()</span> <span class="k">as</span> <span class="nv">$i</span> <span class="o">=&gt;</span> <span class="nv">$competition</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">echo</span> <span class="s1">'+-'</span> <span class="o">.</span> <span class="p">(</span><span class="nv">$competition</span><span class="o">-&gt;</span><span class="na">getGroupsCount</span><span class="p">()</span> <span class="o">?</span> <span class="s1">'+'</span> <span class="o">:</span> <span class="s1">'-'</span><span class="p">)</span> <span class="o">.</span> <span class="s1">'- Competition "'</span> <span class="o">.</span> <span class="nv">$competition</span><span class="o">-&gt;</span><span class="na">getName</span><span class="p">()</span> <span class="o">.</span> <span class="s1">'"'</span> <span class="o">.</span> <span class="nx">PHP_EOL</span><span class="p">;</span>
        <span class="k">foreach</span> <span class="p">(</span><span class="nv">$competition</span><span class="o">-&gt;</span><span class="na">getGroups</span><span class="p">()</span> <span class="k">as</span> <span class="nv">$group</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">echo</span> <span class="p">(</span><span class="nv">$i</span> <span class="o">&lt;</span> <span class="p">(</span><span class="nv">$competitionsCount</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="o">?</span> <span class="s1">'|'</span> <span class="o">:</span> <span class="s1">' '</span><span class="p">)</span> <span class="o">.</span> <span class="s1">' +- Group "'</span> <span class="o">.</span> <span class="nv">$group</span><span class="o">-&gt;</span><span class="na">getName</span><span class="p">()</span> <span class="o">.</span> <span class="s1">'"'</span> <span class="o">.</span> <span class="nx">PHP_EOL</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>

</code></pre>

<p>The Event Tree end point will allow you to discover all the competitions we have available for all sports.</p>

<p>It is exposed as a navigable tree to be easy to parse.</p>

          <h1 id="competition">Competition</h1>

<pre class="highlight php"><code><span class="cp">&lt;?php</span>
<span class="k">require_once</span> <span class="nx">__DIR__</span> <span class="o">.</span> <span class="s1">'/authentication.php'</span><span class="p">;</span>

<span class="c1">// Competition
// Endpoint: /api/v1/sports/competition/&lt;competitionId&gt;
// Optional query params:
//  * since - competition will only contain events with start date greater or equal to provided value (UNIX timestamp)
</span>
<span class="nv">$competition</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">\Sportsbook\CompetitionTree</span><span class="p">();</span>

<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$competitionId</span><span class="p">))</span> <span class="p">{</span>
    <span class="nv">$competitionId</span> <span class="o">=</span> <span class="mi">196</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">try</span> <span class="p">{</span>
    <span class="nv">$competition</span><span class="o">-&gt;</span><span class="na">parseFromString</span><span class="p">(</span><span class="nx">getApiResponse</span><span class="p">(</span><span class="s1">'competition/'</span> <span class="o">.</span> <span class="nv">$competitionId</span><span class="p">));</span>
<span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">Exception</span> <span class="nv">$e</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">die</span><span class="p">(</span><span class="s1">'Unable to get competition: '</span> <span class="o">.</span> <span class="nv">$e</span><span class="o">-&gt;</span><span class="na">getMessage</span><span class="p">()</span> <span class="o">.</span> <span class="nx">PHP_EOL</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">echo</span> <span class="s1">'Competition "'</span> <span class="o">.</span> <span class="nv">$competition</span><span class="o">-&gt;</span><span class="na">getName</span><span class="p">()</span> <span class="o">.</span> <span class="s1">'" with '</span> <span class="o">.</span> <span class="nb">count</span><span class="p">(</span><span class="nv">$competition</span><span class="o">-&gt;</span><span class="na">getEvents</span><span class="p">())</span> <span class="o">.</span> <span class="s1">' events'</span> <span class="o">.</span> <span class="nx">PHP_EOL</span><span class="p">;</span>
<span class="nv">$renderer</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">TableRenderer</span><span class="p">(</span><span class="k">array</span><span class="p">(</span>
    <span class="s1">'ID'</span><span class="p">,</span>
    <span class="s1">'Name'</span><span class="p">,</span>
<span class="p">));</span>
<span class="k">foreach</span> <span class="p">(</span><span class="nv">$competition</span><span class="o">-&gt;</span><span class="na">getEvents</span><span class="p">()</span> <span class="k">as</span> <span class="nv">$event</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$renderer</span><span class="o">-&gt;</span><span class="na">row</span><span class="p">(</span><span class="k">array</span><span class="p">(</span>
        <span class="nv">$event</span><span class="o">-&gt;</span><span class="na">getId</span><span class="p">(),</span>
        <span class="nb">implode</span><span class="p">(</span><span class="s1">' vs '</span><span class="p">,</span> <span class="nb">array_map</span><span class="p">(</span><span class="k">function</span> <span class="p">(</span><span class="nx">\Sportsbook\Competitor</span> <span class="nv">$competitor</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nv">$competitor</span><span class="o">-&gt;</span><span class="na">getName</span><span class="p">();</span>
        <span class="p">},</span> <span class="nv">$event</span><span class="o">-&gt;</span><span class="na">getCompetitors</span><span class="p">())),</span>
    <span class="p">));</span>
<span class="p">}</span>
<span class="nv">$renderer</span><span class="o">-&gt;</span><span class="na">end</span><span class="p">();</span>

<span class="c1">// Obtaining timestamp of a random event to use it as a `since` param
</span><span class="nv">$since</span> <span class="o">=</span> <span class="nv">$competition</span><span class="o">-&gt;</span><span class="na">getEventsAt</span><span class="p">(</span><span class="nb">floor</span><span class="p">(</span><span class="nb">count</span><span class="p">(</span><span class="nv">$competition</span><span class="o">-&gt;</span><span class="na">getEvents</span><span class="p">())</span> <span class="o">/</span> <span class="mi">3</span> <span class="o">*</span> <span class="mi">2</span><span class="p">))</span><span class="o">-&gt;</span><span class="na">getTimestamp</span><span class="p">();</span>

<span class="nv">$updatedCompetition</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">\Sportsbook\CompetitionTree</span><span class="p">();</span>

<span class="k">try</span> <span class="p">{</span>
    <span class="nv">$updatedCompetition</span><span class="o">-&gt;</span><span class="na">parseFromString</span><span class="p">(</span><span class="nx">getApiResponse</span><span class="p">(</span><span class="s1">'competition/'</span> <span class="o">.</span> <span class="nv">$competitionId</span> <span class="o">.</span> <span class="s1">'?'</span> <span class="o">.</span> <span class="nb">http_build_query</span><span class="p">(</span><span class="k">array</span><span class="p">(</span>
        <span class="s1">'since'</span> <span class="o">=&gt;</span> <span class="nv">$since</span><span class="p">,</span>
    <span class="p">))));</span>
<span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">Exception</span> <span class="nv">$e</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">die</span><span class="p">(</span><span class="s1">'Unable to get competition: '</span> <span class="o">.</span> <span class="nv">$e</span><span class="o">-&gt;</span><span class="na">getMessage</span><span class="p">()</span> <span class="o">.</span> <span class="nx">PHP_EOL</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">echo</span> <span class="nx">PHP_EOL</span> <span class="o">.</span> <span class="s1">'Competition "'</span> <span class="o">.</span> <span class="nv">$updatedCompetition</span><span class="o">-&gt;</span><span class="na">getName</span><span class="p">()</span> <span class="o">.</span> <span class="s1">'" with '</span> <span class="o">.</span> <span class="nb">count</span><span class="p">(</span><span class="nv">$updatedCompetition</span><span class="o">-&gt;</span><span class="na">getEvents</span><span class="p">())</span> <span class="o">.</span> <span class="s1">' events updated since '</span> <span class="o">.</span> <span class="nb">date</span><span class="p">(</span><span class="s1">'d.m.Y H:i:s'</span><span class="p">,</span> <span class="nv">$since</span><span class="p">)</span> <span class="o">.</span> <span class="nx">PHP_EOL</span><span class="p">;</span>
<span class="nv">$renderer</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">TableRenderer</span><span class="p">(</span><span class="k">array</span><span class="p">(</span>
    <span class="s1">'ID'</span><span class="p">,</span>
    <span class="s1">'Name'</span><span class="p">,</span>
<span class="p">));</span>
<span class="k">foreach</span> <span class="p">(</span><span class="nv">$updatedCompetition</span><span class="o">-&gt;</span><span class="na">getEvents</span><span class="p">()</span> <span class="k">as</span> <span class="nv">$event</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$renderer</span><span class="o">-&gt;</span><span class="na">row</span><span class="p">(</span><span class="k">array</span><span class="p">(</span>
        <span class="nv">$event</span><span class="o">-&gt;</span><span class="na">getId</span><span class="p">(),</span>
        <span class="nb">implode</span><span class="p">(</span><span class="s1">' vs '</span><span class="p">,</span> <span class="nb">array_map</span><span class="p">(</span><span class="k">function</span> <span class="p">(</span><span class="nx">\Sportsbook\Competitor</span> <span class="nv">$competitor</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nv">$competitor</span><span class="o">-&gt;</span><span class="na">getName</span><span class="p">();</span>
        <span class="p">},</span> <span class="nv">$event</span><span class="o">-&gt;</span><span class="na">getCompetitors</span><span class="p">())),</span>
    <span class="p">));</span>
<span class="p">}</span>
<span class="nv">$renderer</span><span class="o">-&gt;</span><span class="na">end</span><span class="p">();</span>

</code></pre>

<p>The Competition end point will return you all the upcoming events for the selected competition.</p>

<p>It will include a small selection (2-4) of the most popular markets for this competition.</p>

          <h1 id="live-events">Live Events</h1>

<pre class="highlight php"><code><span class="cp">&lt;?php</span>
<span class="k">require_once</span> <span class="nx">__DIR__</span> <span class="o">.</span> <span class="s1">'/authentication.php'</span><span class="p">;</span>

<span class="c1">// Live Events
// Endpoint: /api/v1/sports/live_events
</span>
<span class="nv">$liveEvents</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">\Sportsbook\EventList</span><span class="p">();</span>

<span class="k">try</span> <span class="p">{</span>
    <span class="nv">$liveEvents</span><span class="o">-&gt;</span><span class="na">parseFromString</span><span class="p">(</span><span class="nx">getApiResponse</span><span class="p">(</span><span class="s1">'live_events'</span><span class="p">));</span>
<span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">Exception</span> <span class="nv">$e</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">die</span><span class="p">(</span><span class="s1">'Unable to get live events: '</span> <span class="o">.</span> <span class="nv">$e</span><span class="o">-&gt;</span><span class="na">getMessage</span><span class="p">()</span> <span class="o">.</span> <span class="nx">PHP_EOL</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nv">$liveEvents</span><span class="o">-&gt;</span><span class="na">getEventsCount</span><span class="p">())</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="s1">'No live events were found'</span> <span class="o">.</span> <span class="nx">PHP_EOL</span><span class="p">;</span>
<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="s1">'Live events'</span> <span class="o">.</span> <span class="nx">PHP_EOL</span><span class="p">;</span>
    <span class="nv">$renderer</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">TableRenderer</span><span class="p">(</span><span class="k">array</span><span class="p">(</span>
        <span class="s1">'ID'</span><span class="p">,</span>
        <span class="s1">'Name'</span><span class="p">,</span>
    <span class="p">));</span>
    <span class="k">foreach</span> <span class="p">(</span><span class="nv">$liveEvents</span><span class="o">-&gt;</span><span class="na">getEvents</span><span class="p">()</span> <span class="k">as</span> <span class="nv">$event</span><span class="p">)</span> <span class="p">{</span>
        <span class="nv">$renderer</span><span class="o">-&gt;</span><span class="na">row</span><span class="p">(</span><span class="k">array</span><span class="p">(</span>
            <span class="nv">$event</span><span class="o">-&gt;</span><span class="na">getId</span><span class="p">(),</span>
            <span class="nb">implode</span><span class="p">(</span><span class="s1">' vs '</span><span class="p">,</span> <span class="nb">array_map</span><span class="p">(</span><span class="k">function</span> <span class="p">(</span><span class="nx">\Sportsbook\Competitor</span> <span class="nv">$competitor</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">return</span> <span class="nv">$competitor</span><span class="o">-&gt;</span><span class="na">getName</span><span class="p">();</span>
            <span class="p">},</span> <span class="nv">$event</span><span class="o">-&gt;</span><span class="na">getCompetitors</span><span class="p">())),</span>
        <span class="p">));</span>
    <span class="p">}</span>
    <span class="nv">$renderer</span><span class="o">-&gt;</span><span class="na">end</span><span class="p">();</span>
<span class="p">}</span>

</code></pre>

<p>The Live Events end point will return a list of all the currently live events.</p>

<p>It will also return the current primary market. This is the market we deem most important for this sport.</p>

          <h1 id="event">Event</h1>

<pre class="highlight php"><code><span class="cp">&lt;?php</span>
<span class="k">require_once</span> <span class="nx">__DIR__</span> <span class="o">.</span> <span class="s1">'/authentication.php'</span><span class="p">;</span>

<span class="c1">// Event
// Endpoint: /api/v1/sports/event/&lt;eventId&gt;
</span>
<span class="nv">$event</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">\Sportsbook\Event</span><span class="p">();</span>

<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$eventId</span><span class="p">))</span> <span class="p">{</span>
    <span class="nv">$eventId</span> <span class="o">=</span> <span class="mi">398437</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">try</span> <span class="p">{</span>
    <span class="nv">$event</span><span class="o">-&gt;</span><span class="na">parseFromString</span><span class="p">(</span><span class="nx">getApiResponse</span><span class="p">(</span><span class="s1">'event/'</span> <span class="o">.</span> <span class="nv">$eventId</span><span class="p">));</span>
<span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">Exception</span> <span class="nv">$e</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">die</span><span class="p">(</span><span class="s1">'Unable to get event: '</span> <span class="o">.</span> <span class="nv">$e</span><span class="o">-&gt;</span><span class="na">getMessage</span><span class="p">()</span> <span class="o">.</span> <span class="nx">PHP_EOL</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">echo</span> <span class="s1">'Event #'</span> <span class="o">.</span> <span class="nv">$event</span><span class="o">-&gt;</span><span class="na">getId</span><span class="p">()</span> <span class="o">.</span> <span class="s1">': '</span> <span class="o">.</span> <span class="nb">implode</span><span class="p">(</span><span class="s1">' vs '</span><span class="p">,</span> <span class="nb">array_map</span><span class="p">(</span><span class="k">function</span> <span class="p">(</span><span class="nx">\Sportsbook\Competitor</span> <span class="nv">$competitor</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nv">$competitor</span><span class="o">-&gt;</span><span class="na">getName</span><span class="p">();</span>
<span class="p">},</span> <span class="nv">$event</span><span class="o">-&gt;</span><span class="na">getCompetitors</span><span class="p">()))</span> <span class="o">.</span> <span class="nx">PHP_EOL</span><span class="p">;</span>

</code></pre>

<p>The Event end point will return you every single market for the selected event.</p>

<p>It will work the same way for both pre-match and live events and ids for events will not change through their life-cycle.</p>

<p>You can get the current score from this end point.</p>

          <h1 id="asian">Asian</h1>

<pre class="highlight php"><code><span class="cp">&lt;?php</span>
<span class="k">require_once</span> <span class="nx">__DIR__</span> <span class="o">.</span> <span class="s1">'/authentication.php'</span><span class="p">;</span>

<span class="c1">// Asian Events
// Endpoint: /api/v1/sports/asian_events/&lt;sportId&gt;
// Optional query params:
//  * from - start date (UNIX timestamp)
//  * to   - end date (UNIX timestamp)
</span>
<span class="nv">$asianEvents</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">\Sportsbook\EventList</span><span class="p">();</span>

<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$sportId</span><span class="p">))</span> <span class="p">{</span>
    <span class="nv">$sportId</span> <span class="o">=</span> <span class="mi">3</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">try</span> <span class="p">{</span>
    <span class="nv">$asianEvents</span><span class="o">-&gt;</span><span class="na">parseFromString</span><span class="p">(</span><span class="nx">getApiResponse</span><span class="p">(</span><span class="s1">'asian_events/'</span> <span class="o">.</span> <span class="nv">$sportId</span><span class="p">));</span>
<span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">Exception</span> <span class="nv">$e</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">die</span><span class="p">(</span><span class="s1">'Unable to get asian events: '</span> <span class="o">.</span> <span class="nv">$e</span><span class="o">-&gt;</span><span class="na">getMessage</span><span class="p">()</span> <span class="o">.</span> <span class="nx">PHP_EOL</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nv">$asianEvents</span><span class="o">-&gt;</span><span class="na">getEventsCount</span><span class="p">())</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="s1">'No asian events were found for sport '</span> <span class="o">.</span> <span class="p">(</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$sportNames</span><span class="p">)</span> <span class="o">?</span> <span class="s1">'"'</span> <span class="o">.</span> <span class="nv">$sportNames</span><span class="p">[</span><span class="nv">$sportId</span><span class="p">]</span> <span class="o">.</span> <span class="s1">'"'</span> <span class="o">:</span> <span class="s1">'#'</span> <span class="o">.</span> <span class="nv">$sportId</span><span class="p">)</span> <span class="o">.</span> <span class="nx">PHP_EOL</span><span class="p">;</span>
<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="s1">'Asian events for sport '</span> <span class="o">.</span> <span class="p">(</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$sportNames</span><span class="p">)</span> <span class="o">?</span> <span class="s1">'"'</span> <span class="o">.</span> <span class="nv">$sportNames</span><span class="p">[</span><span class="nv">$sportId</span><span class="p">]</span> <span class="o">.</span> <span class="s1">'"'</span> <span class="o">:</span> <span class="s1">'#'</span> <span class="o">.</span> <span class="nv">$sportId</span><span class="p">)</span> <span class="o">.</span> <span class="nx">PHP_EOL</span><span class="p">;</span>
    <span class="nv">$renderer</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">TableRenderer</span><span class="p">(</span><span class="k">array</span><span class="p">(</span>
        <span class="s1">'ID'</span><span class="p">,</span>
        <span class="s1">'Name'</span><span class="p">,</span>
    <span class="p">));</span>
    <span class="k">foreach</span> <span class="p">(</span><span class="nv">$asianEvents</span><span class="o">-&gt;</span><span class="na">getEvents</span><span class="p">()</span> <span class="k">as</span> <span class="nv">$event</span><span class="p">)</span> <span class="p">{</span>
        <span class="nv">$renderer</span><span class="o">-&gt;</span><span class="na">row</span><span class="p">(</span><span class="k">array</span><span class="p">(</span>
            <span class="nv">$event</span><span class="o">-&gt;</span><span class="na">getId</span><span class="p">(),</span>
            <span class="nb">implode</span><span class="p">(</span><span class="s1">' vs '</span><span class="p">,</span> <span class="nb">array_map</span><span class="p">(</span><span class="k">function</span> <span class="p">(</span><span class="nx">\Sportsbook\Competitor</span> <span class="nv">$competitor</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">return</span> <span class="nv">$competitor</span><span class="o">-&gt;</span><span class="na">getName</span><span class="p">();</span>
            <span class="p">},</span> <span class="nv">$event</span><span class="o">-&gt;</span><span class="na">getCompetitors</span><span class="p">())),</span>
        <span class="p">));</span>
    <span class="p">}</span>
    <span class="nv">$renderer</span><span class="o">-&gt;</span><span class="na">end</span><span class="p">();</span>
<span class="p">}</span>

</code></pre>

<p>The Asian end point provides you an API specific to rendering interaces useful for Asian audiences.</p>

<p>It will return all the events starting within the specified time period.</p>

<p>It will return only the following markets:</p>

<ul>
<li>Moneyline/Winner markets (2 or 3 selections)</li>
<li>Asian Handicap (Multiple 2 selection lines)</li>
<li>Totals (Multiple 2 selection lines)</li>
<li>1st Half Moneyline/Winner markets (2 or 3 selections)</li>
<li>1st Half Asian Handicap (Multiple 2 selection lines)</li>
<li>1st Totals (Multiple 2 selection lines)</li>
</ul>

          <h1 id="upcoming-events">Upcoming Events</h1>

<pre class="highlight php"><code><span class="cp">&lt;?php</span>
<span class="k">require_once</span> <span class="nx">__DIR__</span> <span class="o">.</span> <span class="s1">'/authentication.php'</span><span class="p">;</span>

<span class="c1">// Upcoming Events
// Endpoint: /api/v1/sports/upcoming/&lt;sportId&gt;
</span>
<span class="nv">$upcomingEvents</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">\Sportsbook\EventList</span><span class="p">();</span>

<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$sportId</span><span class="p">))</span> <span class="p">{</span>
    <span class="nv">$sportId</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">try</span> <span class="p">{</span>
    <span class="nv">$upcomingEvents</span><span class="o">-&gt;</span><span class="na">parseFromString</span><span class="p">(</span><span class="nx">getApiResponse</span><span class="p">(</span><span class="s1">'upcoming/'</span> <span class="o">.</span> <span class="nv">$sportId</span><span class="p">));</span>
<span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">Exception</span> <span class="nv">$e</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">die</span><span class="p">(</span><span class="s1">'Unable to get upcoming events: '</span> <span class="o">.</span> <span class="nv">$e</span><span class="o">-&gt;</span><span class="na">getMessage</span><span class="p">()</span> <span class="o">.</span> <span class="nx">PHP_EOL</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nv">$upcomingEvents</span><span class="o">-&gt;</span><span class="na">getEventsCount</span><span class="p">())</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="s1">'No upcoming events were found for sport '</span> <span class="o">.</span> <span class="p">(</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$sportNames</span><span class="p">)</span> <span class="o">?</span> <span class="s1">'"'</span> <span class="o">.</span> <span class="nv">$sportNames</span><span class="p">[</span><span class="nv">$sportId</span><span class="p">]</span> <span class="o">.</span> <span class="s1">'"'</span> <span class="o">:</span> <span class="s1">'#'</span> <span class="o">.</span> <span class="nv">$sportId</span><span class="p">)</span> <span class="o">.</span> <span class="nx">PHP_EOL</span><span class="p">;</span>
<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="s1">'Upcoming events for sport '</span> <span class="o">.</span> <span class="p">((</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$sportNames</span><span class="p">)</span> <span class="o">?</span> <span class="s1">'"'</span> <span class="o">.</span> <span class="nv">$sportNames</span><span class="p">[</span><span class="nv">$sportId</span><span class="p">]</span> <span class="o">.</span> <span class="s1">'"'</span> <span class="o">:</span> <span class="s1">'#'</span> <span class="o">.</span> <span class="nv">$sportId</span><span class="p">))</span> <span class="o">.</span> <span class="nx">PHP_EOL</span><span class="p">;</span>
    <span class="nv">$renderer</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">TableRenderer</span><span class="p">(</span><span class="k">array</span><span class="p">(</span>
        <span class="s1">'ID'</span><span class="p">,</span>
        <span class="s1">'Name'</span><span class="p">,</span>
    <span class="p">));</span>
    <span class="k">foreach</span> <span class="p">(</span><span class="nv">$upcomingEvents</span><span class="o">-&gt;</span><span class="na">getEvents</span><span class="p">()</span> <span class="k">as</span> <span class="nv">$event</span><span class="p">)</span> <span class="p">{</span>
        <span class="nv">$renderer</span><span class="o">-&gt;</span><span class="na">row</span><span class="p">(</span><span class="k">array</span><span class="p">(</span>
            <span class="nv">$event</span><span class="o">-&gt;</span><span class="na">getId</span><span class="p">(),</span>
            <span class="nb">implode</span><span class="p">(</span><span class="s1">' vs '</span><span class="p">,</span> <span class="nb">array_map</span><span class="p">(</span><span class="k">function</span> <span class="p">(</span><span class="nx">\Sportsbook\Competitor</span> <span class="nv">$competitor</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">return</span> <span class="nv">$competitor</span><span class="o">-&gt;</span><span class="na">getName</span><span class="p">();</span>
            <span class="p">},</span> <span class="nv">$event</span><span class="o">-&gt;</span><span class="na">getCompetitors</span><span class="p">())),</span>
        <span class="p">));</span>
    <span class="p">}</span>
    <span class="nv">$renderer</span><span class="o">-&gt;</span><span class="na">end</span><span class="p">();</span>
<span class="p">}</span>

</code></pre>

<p>The upcoming events end point returns a short list of events about to start.</p>

<p>This end point can be filtered by sport id or show all across all sports.</p>

          <h1 id="outright">Outright</h1>

<pre class="highlight php"><code><span class="cp">&lt;?php</span>
<span class="k">require_once</span> <span class="nx">__DIR__</span> <span class="o">.</span> <span class="s1">'/authentication.php'</span><span class="p">;</span>

<span class="c1">// Outright
// Endpoint: /api/v1/sports/outright/&lt;outrightId&gt;
</span>
<span class="nv">$outright</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">\Sportsbook\Outright</span><span class="p">();</span>

<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$outrightId</span><span class="p">))</span> <span class="p">{</span>
    <span class="nv">$outrightId</span> <span class="o">=</span> <span class="mi">188134</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">try</span> <span class="p">{</span>
    <span class="nv">$outright</span><span class="o">-&gt;</span><span class="na">parseFromString</span><span class="p">(</span><span class="nx">getApiResponse</span><span class="p">(</span><span class="s1">'outright/'</span> <span class="o">.</span> <span class="nv">$outrightId</span><span class="p">));</span>
<span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">Exception</span> <span class="nv">$e</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">die</span><span class="p">(</span><span class="s1">'Unable to get outright: '</span> <span class="o">.</span> <span class="nv">$e</span><span class="o">-&gt;</span><span class="na">getMessage</span><span class="p">()</span> <span class="o">.</span> <span class="nx">PHP_EOL</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">echo</span> <span class="s1">'Outright #'</span> <span class="o">.</span> <span class="nv">$outright</span><span class="o">-&gt;</span><span class="na">getId</span><span class="p">()</span> <span class="o">.</span> <span class="s1">': "'</span> <span class="o">.</span> <span class="nv">$outright</span><span class="o">-&gt;</span><span class="na">getName</span><span class="p">()</span> <span class="o">.</span> <span class="s1">'" for competition "'</span> <span class="o">.</span> <span class="nv">$outright</span><span class="o">-&gt;</span><span class="na">getCompetition</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">getName</span><span class="p">()</span> <span class="o">.</span> <span class="s1">'"'</span> <span class="o">.</span> <span class="nx">PHP_EOL</span><span class="p">;</span>
<span class="nv">$renderer</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">TableRenderer</span><span class="p">(</span><span class="k">array</span><span class="p">(</span>
    <span class="s1">'Name'</span><span class="p">,</span>
    <span class="s1">'Status'</span><span class="p">,</span>
    <span class="s1">'Min Stake'</span><span class="p">,</span>
    <span class="s1">'Max Stake'</span><span class="p">,</span>
<span class="p">));</span>
<span class="nv">$selectionStatus</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">\Sportsbook\SelectionStatus</span><span class="p">();</span>
<span class="nv">$selectionStatuses</span> <span class="o">=</span> <span class="nb">array_flip</span><span class="p">(</span><span class="nv">$selectionStatus</span><span class="o">-&gt;</span><span class="na">getEnumValues</span><span class="p">());</span>
<span class="k">foreach</span> <span class="p">(</span><span class="nv">$outright</span><span class="o">-&gt;</span><span class="na">getSelections</span><span class="p">()</span> <span class="k">as</span> <span class="nv">$selection</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$renderer</span><span class="o">-&gt;</span><span class="na">row</span><span class="p">(</span><span class="k">array</span><span class="p">(</span>
        <span class="nv">$selection</span><span class="o">-&gt;</span><span class="na">getName</span><span class="p">(),</span>
        <span class="nv">$selectionStatuses</span><span class="p">[</span><span class="nv">$selection</span><span class="o">-&gt;</span><span class="na">getStatus</span><span class="p">()],</span>
        <span class="nv">$selection</span><span class="o">-&gt;</span><span class="na">getMinStake</span><span class="p">(),</span>
        <span class="nv">$selection</span><span class="o">-&gt;</span><span class="na">getMaxStake</span><span class="p">(),</span>
    <span class="p">));</span>
<span class="p">}</span>
<span class="nv">$renderer</span><span class="o">-&gt;</span><span class="na">end</span><span class="p">();</span>

</code></pre>

<p>The Outright end point will return you the selections availble for a particular outright market.</p>

<p>Available outright markets are exposed in the competition API.</p>

          <h1 id="errors">Errors</h1>

<p>The Sports API uses the following error codes:</p>

<table><thead>
<tr>
<th>Error Code</th>
<th>Meaning</th>
</tr>
</thead><tbody>
<tr>
<td>400</td>
<td>Bad Request &ndash; Your request is malformed</td>
</tr>
<tr>
<td>401</td>
<td>Unauthorized &ndash; Your API key is wrong</td>
</tr>
<tr>
<td>404</td>
<td>Not Found &ndash; The specified object was not found</td>
</tr>
<tr>
<td>405</td>
<td>Method Not Allowed &ndash; You tried to access an object with an invalid method</td>
</tr>
<tr>
<td>406</td>
<td>Not Acceptable &ndash; You requested a format that isn&rsquo;t json or protobuf</td>
</tr>
<tr>
<td>429</td>
<td>Too Many Requests &ndash; You&rsquo;re exceeding your the request rate limit! Slow down!</td>
</tr>
<tr>
<td>500</td>
<td>Internal Server Error &ndash; We had a problem with our server. Try again later.</td>
</tr>
<tr>
<td>503</td>
<td>Service Unavailable &ndash; We&rsquo;re temporarially offline for maintanance. Please try again later.</td>
</tr>
</tbody></table>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="php">php</a>
          </div>
      </div>
    </div>
  </body>
</html>
