<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>Cloudbet - API Reference</title>

    <style>
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight, .highlight .w {
  color: #f8f8f2;
  background-color: #272822;
}
.highlight .err {
  color: #272822;
  background-color: #f92672;
}
.highlight .c, .highlight .cd, .highlight .cm, .highlight .c1, .highlight .cs {
  color: #75715e;
}
.highlight .cp {
  color: #f4bf75;
}
.highlight .nt {
  color: #f4bf75;
}
.highlight .o, .highlight .ow {
  color: #f8f8f2;
}
.highlight .p, .highlight .pi {
  color: #f8f8f2;
}
.highlight .gi {
  color: #a6e22e;
}
.highlight .gd {
  color: #f92672;
}
.highlight .gh {
  color: #66d9ef;
  background-color: #272822;
  font-weight: bold;
}
.highlight .k, .highlight .kn, .highlight .kp, .highlight .kr, .highlight .kv {
  color: #ae81ff;
}
.highlight .kc {
  color: #fd971f;
}
.highlight .kt {
  color: #fd971f;
}
.highlight .kd {
  color: #fd971f;
}
.highlight .s, .highlight .sb, .highlight .sc, .highlight .sd, .highlight .s2, .highlight .sh, .highlight .sx, .highlight .s1 {
  color: #a6e22e;
}
.highlight .sr {
  color: #a1efe4;
}
.highlight .si {
  color: #cc6633;
}
.highlight .se {
  color: #cc6633;
}
.highlight .nn {
  color: #f4bf75;
}
.highlight .nc {
  color: #f4bf75;
}
.highlight .no {
  color: #f4bf75;
}
.highlight .na {
  color: #66d9ef;
}
.highlight .m, .highlight .mf, .highlight .mh, .highlight .mi, .highlight .il, .highlight .mo, .highlight .mb, .highlight .mx {
  color: #a6e22e;
}
.highlight .ss {
  color: #a6e22e;
}
    </style>
    <link href="stylesheets/screen.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print.css" rel="stylesheet" media="print" />
      <script src="javascripts/all.js"></script>
  </head>

  <body class="index" data-languages="[&quot;php&quot;]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar.png" alt="Navbar" />
      </span>
    </a>
    <div class="tocify-wrapper">
      <img src="images/logo.png" alt="Logo" />
        <div class="lang-selector">
              <a href="#" data-language-name="php">php</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <div id="toc">
      </div>
        <ul class="toc-footer">
            <li><a href='https://affiliates.cloudbet.com/en/affiliates/sign_up'>Sign Up for a Developer Key</a></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        
          <h1 id="introduction">Introduction</h1>

<p>Welcome to the Cloudbet API! You can use our API to retrieve current odds data for all of our events.</p>

<p>You can view the source code for this documentation on <a href="https://github.com/cloudbet/docs">github</a>.</p>

          <h1 id="data-schema-protobuf">Data Schema (Protobuf)</h1>

<p>We use <a href="https://developers.google.com/protocolbuffers">Google Protocol Buffers</a> or Protobuf to define our data schema. Protobuf provides bindings to generate classes in most programming languages. This is the preferred method for accessing our APIs since once you use Protobuf you can benefit from the performance benefits of Protobuf. You can request JSON instead but you&rsquo;ll lose the benefits of using binary.</p>

<h2 id="installing-protobuf">Installing Protobuf</h2>

<h3 id="debian-ubuntu">Debian/Ubuntu</h3>

<aside>
apt-get install protobuf-compiler
</aside>

<h3 id="macos">MacOS:</h3>

<aside>
brew install protobuf
</aside>

<h3 id="generate-source-example">Generate Source Example</h3>

<aside>
protoc &ndash;go_out=. feed.proto
</aside>

<h2 id="language-specific-bindings">Language specific bindings</h2>

<pre class="highlight php"><code><span class="cp">&lt;?php</span>
<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nb">function_exists</span><span class="p">(</span><span class="s1">'curl_init'</span><span class="p">))</span> <span class="p">{</span>
    <span class="k">die</span><span class="p">(</span><span class="s1">'cURL extension is not installed'</span> <span class="o">.</span> <span class="nx">PHP_EOL</span><span class="p">);</span>
<span class="p">}</span>

<span class="c1">// Simple autoloader for our generated classes
</span><span class="nb">spl_autoload_register</span><span class="p">(</span><span class="k">function</span> <span class="p">(</span><span class="nv">$className</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nv">$className</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s1">'\\'</span><span class="p">)</span> <span class="p">{</span>
        <span class="nv">$className</span> <span class="o">=</span> <span class="nb">substr</span><span class="p">(</span><span class="nv">$className</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="k">if</span> <span class="p">(</span><span class="nb">strpos</span><span class="p">(</span><span class="nv">$className</span><span class="p">,</span> <span class="s1">'Sportsbook\\'</span><span class="p">)</span> <span class="o">===</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
        <span class="nv">$fileName</span> <span class="o">=</span> <span class="nx">__DIR__</span> <span class="o">.</span> <span class="s1">'/php-sportsbook/'</span> <span class="o">.</span> <span class="nb">strtr</span><span class="p">(</span><span class="nv">$className</span><span class="p">,</span> <span class="s1">'\\'</span><span class="p">,</span> <span class="nx">DIRECTORY_SEPARATOR</span><span class="p">)</span> <span class="o">.</span> <span class="s1">'.php'</span><span class="p">;</span>
        <span class="k">if</span> <span class="p">(</span><span class="nb">file_exists</span><span class="p">(</span><span class="nv">$fileName</span><span class="p">))</span> <span class="p">{</span>
            <span class="k">include</span> <span class="nv">$fileName</span><span class="p">;</span>

            <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">});</span>
</code></pre>

<h4 id="ruby">Ruby:</h4>

<aside>
gem install protobuf
</aside>

<h4 id="go">Go:</h4>

<aside>
go get github.com/golang/protobuf/proto<br/>
go get github.com/golang/protobuf/protoc-gen-go
</aside>

<h4 id="python">Python:</h4>

<aside>
export PYTHONPATH=~/python<br/>
easy_install -d ~/python protobuf
</aside>

<h4 id="php">PHP:</h4>

<p>Install <a href="https://github.com/allegro/php-protobuf">protobuf</a> PHP extension as described in the project README</p>

<h2 id="usage">Usage</h2>

<h3 id="examples">Examples</h3>

<h4 id="php">PHP</h4>

<ol>
<li>Run <code class="prettyprint">./gen-php.sh /path/to/php-protobuf/protoc-gen-php.php</code> to compile messages from a proto file.</li>
<li>Run <code class="prettyprint">php example.php</code> to decode random API responses. The output produced should be similar to following:</li>
</ol>

<h3 id="application-setup-example">Application Setup Example</h3>

<aside>
mkdir protobuf
echo &rsquo;*\n!.gitignore\n!schema&rsquo; > protobuf/.gitignore
git submodule add git@github.com:cloudbet/api-schema.git protobuf/schema
</aside>

<p>Check one of the sample scripts to <code class="prettyprint">gen-*.sh</code> in order to generate accessors
for your required language.</p>

          <h1 id="authentication">Authentication</h1>

<pre class="highlight php"><code><span class="cp">&lt;?php</span>
<span class="k">require</span> <span class="s1">'protobuf'</span><span class="p">;</span>

<span class="nv">$jwtToken</span> <span class="o">=</span> <span class="s1">'Paste your api key'</span><span class="p">;</span>

<span class="c1">// Simple function to obtain the API response
</span><span class="k">function</span> <span class="nf">getApiResponse</span><span class="p">(</span><span class="nv">$method</span><span class="p">)</span>
<span class="p">{</span>
    <span class="nv">$ch</span> <span class="o">=</span> <span class="nb">curl_init</span><span class="p">();</span>
    <span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_HEADER</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
    <span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_RETURNTRANSFER</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
    <span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_URL</span><span class="p">,</span> <span class="s1">'https://api.cloudbet.com/api/v1/sports/'</span> <span class="o">.</span> <span class="nv">$method</span><span class="p">);</span>
    <span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_HTTPHEADER</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">'Accept: application/octet-stream'</span><span class="p">,</span>
        <span class="s1">'Authorization: bearer '</span> <span class="o">.</span> <span class="nv">$jwtToken</span>
    <span class="p">));</span>
    <span class="nv">$response</span> <span class="o">=</span> <span class="nb">curl_exec</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>
    <span class="nv">$code</span> <span class="o">=</span> <span class="nb">curl_getinfo</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLINFO_HTTP_CODE</span><span class="p">);</span>
    <span class="nb">curl_close</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>

    <span class="k">if</span> <span class="p">(</span><span class="nv">$code</span> <span class="o">!==</span> <span class="mi">200</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">throw</span> <span class="k">new</span> <span class="nx">Exception</span><span class="p">(</span><span class="s1">'Response with error code '</span> <span class="o">.</span> <span class="nv">$code</span> <span class="o">.</span> <span class="s1">' received'</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span><span class="k">empty</span><span class="p">(</span><span class="nv">$response</span><span class="p">))</span> <span class="p">{</span>
        <span class="k">throw</span> <span class="k">new</span> <span class="nx">Exception</span><span class="p">(</span><span class="s1">'Empty response received'</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="nv">$response</span><span class="p">;</span>
<span class="p">}</span>
</code></pre>

<p>The Cloudbet API uses JSON Web Tokens or <a href="https://jwt.io">JWTs</a> to allow secure access to the API.</p>

<p>You can register for an API key at our <a href="https://affiliates.cloudbet.com/en/affiliates/sign_up">affiliate portal</a>.</p>

<p>Our API expects for the API key to be included in all API requests to the server in a HTTP header that looks like the following:</p>

<p><code class="prettyprint">Authorization: bearer TOKEN</code></p>

<aside class="notice">
You must replace <code>TOKEN</code> with your personal API key.
</aside>

          <h1 id="sports">Sports</h1>

<pre class="highlight php"><code><span class="cp">&lt;?php</span>
<span class="k">require</span> <span class="s1">'authentication'</span><span class="p">;</span>

<span class="c1">// Sports
// Endpoint: /api/v2/sports
</span>
<span class="c1">// TODO: This needs finishing
</span></code></pre>

          <h1 id="live-events">Live Events</h1>

<pre class="highlight php"><code><span class="cp">&lt;?php</span>
<span class="k">require</span> <span class="s1">'authentication'</span><span class="p">;</span>

<span class="c1">// Live Events
// Endpoint: /api/v2/sports/live_events
</span>
<span class="nv">$liveEvents</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">\Sportsbook\EventList</span><span class="p">();</span>

<span class="k">try</span> <span class="p">{</span>
    <span class="nv">$liveEvents</span><span class="o">-&gt;</span><span class="na">parseFromString</span><span class="p">(</span><span class="nx">getApiResponse</span><span class="p">(</span><span class="s1">'live_events'</span><span class="p">));</span>
<span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">Exception</span> <span class="nv">$e</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">die</span><span class="p">(</span><span class="s1">'Unable to get live events: '</span> <span class="o">.</span> <span class="nv">$e</span><span class="o">-&gt;</span><span class="na">getMessage</span><span class="p">()</span> <span class="o">.</span> <span class="nx">PHP_EOL</span><span class="p">);</span>
<span class="p">}</span>

<span class="nv">$eventIds</span> <span class="o">=</span> <span class="nb">array_values</span><span class="p">(</span><span class="nb">array_map</span><span class="p">(</span><span class="k">function</span> <span class="p">(</span><span class="nx">\Sportsbook\Event</span> <span class="nv">$event</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nv">$event</span><span class="o">-&gt;</span><span class="na">getId</span><span class="p">();</span>
<span class="p">},</span> <span class="nv">$liveEvents</span><span class="o">-&gt;</span><span class="na">getEvents</span><span class="p">()));</span>

<span class="nv">$sportIds</span> <span class="o">=</span> <span class="nb">array_values</span><span class="p">(</span><span class="nb">array_unique</span><span class="p">(</span><span class="nb">array_map</span><span class="p">(</span><span class="k">function</span> <span class="p">(</span><span class="nx">\Sportsbook\Event</span> <span class="nv">$event</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nv">$event</span><span class="o">-&gt;</span><span class="na">getSport</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">getId</span><span class="p">();</span>
<span class="p">},</span> <span class="nv">$liveEvents</span><span class="o">-&gt;</span><span class="na">getEvents</span><span class="p">())));</span>

<span class="k">echo</span> <span class="s1">'Live events: '</span> <span class="o">.</span> <span class="nb">count</span><span class="p">(</span><span class="nv">$eventIds</span><span class="p">)</span> <span class="o">.</span> <span class="s1">' events in '</span> <span class="o">.</span> <span class="nb">count</span><span class="p">(</span><span class="nv">$sportIds</span><span class="p">)</span> <span class="o">.</span> <span class="s1">' sports'</span> <span class="o">.</span> <span class="nx">PHP_EOL</span><span class="p">;</span>
</code></pre>

          <h1 id="event-tree">Event Tree</h1>

<pre class="highlight php"><code><span class="cp">&lt;?php</span>
<span class="k">require</span> <span class="s1">'authentication'</span><span class="p">;</span>

<span class="c1">// Sports
// Endpoint: /api/v2/event_tree
</span>
<span class="c1">// TODO: This needs finishing
</span></code></pre>

          <h1 id="competition">Competition</h1>

<pre class="highlight php"><code><span class="cp">&lt;?php</span>
<span class="k">require</span> <span class="s1">'authentication'</span><span class="p">;</span>

<span class="c1">// Competition
// Endpoint: /api/v2/sports/competition/&lt;competitionId&gt;
// Optional query params:
//  * since - competition will only contain events with start date greater or equal to provided value (UNIX timestamp)
</span>
<span class="nv">$competition</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">\Sportsbook\CompetitionTree</span><span class="p">();</span>

<span class="k">try</span> <span class="p">{</span>
    <span class="nv">$competition</span><span class="o">-&gt;</span><span class="na">parseFromString</span><span class="p">(</span><span class="nx">getApiResponse</span><span class="p">(</span><span class="s1">'competition/'</span> <span class="o">.</span> <span class="nv">$event</span><span class="o">-&gt;</span><span class="na">getCompetition</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">getId</span><span class="p">()));</span>
<span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">Exception</span> <span class="nv">$e</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">die</span><span class="p">(</span><span class="s1">'Unable to get competition: '</span> <span class="o">.</span> <span class="nv">$e</span><span class="o">-&gt;</span><span class="na">getMessage</span><span class="p">()</span> <span class="o">.</span> <span class="nx">PHP_EOL</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">echo</span> <span class="s1">'Competition #'</span> <span class="o">.</span> <span class="nv">$competition</span><span class="o">-&gt;</span><span class="na">getId</span><span class="p">()</span> <span class="o">.</span> <span class="s1">': "'</span> <span class="o">.</span> <span class="nv">$competition</span><span class="o">-&gt;</span><span class="na">getName</span><span class="p">()</span> <span class="o">.</span> <span class="s1">'" with '</span> <span class="o">.</span> <span class="nb">count</span><span class="p">(</span><span class="nv">$competition</span><span class="o">-&gt;</span><span class="na">getEvents</span><span class="p">())</span> <span class="o">.</span> <span class="s1">' events'</span> <span class="o">.</span> <span class="nx">PHP_EOL</span><span class="p">;</span>

</code></pre>

          <h1 id="event">Event</h1>

<pre class="highlight php"><code><span class="cp">&lt;?php</span>
<span class="k">require</span> <span class="s1">'authentication'</span><span class="p">;</span>

<span class="c1">// Event
// Endpoint: /api/v2/sports/event/&lt;eventId&gt;
</span>
<span class="nv">$event</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">\Sportsbook\Event</span><span class="p">();</span>

<span class="k">try</span> <span class="p">{</span>
    <span class="nv">$event</span><span class="o">-&gt;</span><span class="na">parseFromString</span><span class="p">(</span><span class="nx">getApiResponse</span><span class="p">(</span><span class="s1">'event/'</span> <span class="o">.</span> <span class="nv">$eventIds</span><span class="p">[</span><span class="nb">array_rand</span><span class="p">(</span><span class="nv">$eventIds</span><span class="p">)]));</span>
<span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">Exception</span> <span class="nv">$e</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">die</span><span class="p">(</span><span class="s1">'Unable to get event: '</span> <span class="o">.</span> <span class="nv">$e</span><span class="o">-&gt;</span><span class="na">getMessage</span><span class="p">()</span> <span class="o">.</span> <span class="nx">PHP_EOL</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">echo</span> <span class="s1">'Event #'</span> <span class="o">.</span> <span class="nv">$event</span><span class="o">-&gt;</span><span class="na">getId</span><span class="p">()</span> <span class="o">.</span> <span class="s1">': '</span> <span class="o">.</span> <span class="nb">implode</span><span class="p">(</span><span class="s1">' vs '</span><span class="p">,</span> <span class="nb">array_map</span><span class="p">(</span><span class="k">function</span> <span class="p">(</span><span class="nx">\Sportsbook\Competitor</span> <span class="nv">$competitor</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nv">$competitor</span><span class="o">-&gt;</span><span class="na">getName</span><span class="p">();</span>
<span class="p">},</span> <span class="nv">$event</span><span class="o">-&gt;</span><span class="na">getCompetitors</span><span class="p">()))</span> <span class="o">.</span> <span class="nx">PHP_EOL</span><span class="p">;</span>
</code></pre>

          <h1 id="upcoming-events">Upcoming Events</h1>

<pre class="highlight php"><code><span class="cp">&lt;?php</span>
<span class="k">require</span> <span class="s1">'protobuf'</span><span class="p">;</span>

<span class="c1">// Upcoming Events
// Endpoint: /api/v2/sports/upcoming/&lt;sportId&gt;
</span>
<span class="nv">$upcomingEvents</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">\Sportsbook\EventList</span><span class="p">();</span>
<span class="nv">$sportId</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>

<span class="k">try</span> <span class="p">{</span>
    <span class="nv">$upcomingEvents</span><span class="o">-&gt;</span><span class="na">parseFromString</span><span class="p">(</span><span class="nx">getApiResponse</span><span class="p">(</span><span class="s1">'upcoming/'</span> <span class="o">.</span> <span class="nv">$sportId</span><span class="p">));</span>
<span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">Exception</span> <span class="nv">$e</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">die</span><span class="p">(</span><span class="s1">'Unable to get upcoming events: '</span> <span class="o">.</span> <span class="nv">$e</span><span class="o">-&gt;</span><span class="na">getMessage</span><span class="p">()</span> <span class="o">.</span> <span class="nx">PHP_EOL</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">echo</span> <span class="s1">'Upcoming events: '</span> <span class="o">.</span> <span class="nb">count</span><span class="p">(</span><span class="nv">$upcomingEvents</span><span class="o">-&gt;</span><span class="na">getEvents</span><span class="p">())</span> <span class="o">.</span> <span class="s1">' events for sport #'</span> <span class="o">.</span> <span class="nv">$sportId</span> <span class="o">.</span> <span class="nx">PHP_EOL</span><span class="p">;</span>
</code></pre>

          <h1 id="authentication">Authentication</h1>

<pre class="highlight php"><code><span class="cp">&lt;?php</span>
<span class="k">require</span> <span class="s1">'protobuf'</span><span class="p">;</span>

<span class="nv">$jwtToken</span> <span class="o">=</span> <span class="s1">'Paste your api key'</span><span class="p">;</span>

<span class="c1">// Simple function to obtain the API response
</span><span class="k">function</span> <span class="nf">getApiResponse</span><span class="p">(</span><span class="nv">$method</span><span class="p">)</span>
<span class="p">{</span>
    <span class="nv">$ch</span> <span class="o">=</span> <span class="nb">curl_init</span><span class="p">();</span>
    <span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_HEADER</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
    <span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_RETURNTRANSFER</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
    <span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_URL</span><span class="p">,</span> <span class="s1">'https://api.cloudbet.com/api/v1/sports/'</span> <span class="o">.</span> <span class="nv">$method</span><span class="p">);</span>
    <span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_HTTPHEADER</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">'Accept: application/octet-stream'</span><span class="p">,</span>
        <span class="s1">'Authorization: bearer '</span> <span class="o">.</span> <span class="nv">$jwtToken</span>
    <span class="p">));</span>
    <span class="nv">$response</span> <span class="o">=</span> <span class="nb">curl_exec</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>
    <span class="nv">$code</span> <span class="o">=</span> <span class="nb">curl_getinfo</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLINFO_HTTP_CODE</span><span class="p">);</span>
    <span class="nb">curl_close</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>

    <span class="k">if</span> <span class="p">(</span><span class="nv">$code</span> <span class="o">!==</span> <span class="mi">200</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">throw</span> <span class="k">new</span> <span class="nx">Exception</span><span class="p">(</span><span class="s1">'Response with error code '</span> <span class="o">.</span> <span class="nv">$code</span> <span class="o">.</span> <span class="s1">' received'</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span><span class="k">empty</span><span class="p">(</span><span class="nv">$response</span><span class="p">))</span> <span class="p">{</span>
        <span class="k">throw</span> <span class="k">new</span> <span class="nx">Exception</span><span class="p">(</span><span class="s1">'Empty response received'</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="nv">$response</span><span class="p">;</span>
<span class="p">}</span>
</code></pre>

<p>The Cloudbet API uses JSON Web Tokens or <a href="https://jwt.io">JWTs</a> to allow secure access to the API.</p>

<p>You can register for an API key at our <a href="https://affiliates.cloudbet.com/en/affiliates/sign_up">affiliate portal</a>.</p>

<p>Our API expects for the API key to be included in all API requests to the server in a HTTP header that looks like the following:</p>

<p><code class="prettyprint">Authorization: bearer TOKEN</code></p>

<aside class="notice">
You must replace <code>TOKEN</code> with your personal API key.
</aside>

          <h1 id="authentication">Authentication</h1>

<pre class="highlight php"><code><span class="cp">&lt;?php</span>
<span class="k">require</span> <span class="s1">'protobuf'</span><span class="p">;</span>

<span class="nv">$jwtToken</span> <span class="o">=</span> <span class="s1">'Paste your api key'</span><span class="p">;</span>

<span class="c1">// Simple function to obtain the API response
</span><span class="k">function</span> <span class="nf">getApiResponse</span><span class="p">(</span><span class="nv">$method</span><span class="p">)</span>
<span class="p">{</span>
    <span class="nv">$ch</span> <span class="o">=</span> <span class="nb">curl_init</span><span class="p">();</span>
    <span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_HEADER</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
    <span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_RETURNTRANSFER</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
    <span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_URL</span><span class="p">,</span> <span class="s1">'https://api.cloudbet.com/api/v1/sports/'</span> <span class="o">.</span> <span class="nv">$method</span><span class="p">);</span>
    <span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLOPT_HTTPHEADER</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">'Accept: application/octet-stream'</span><span class="p">,</span>
        <span class="s1">'Authorization: bearer '</span> <span class="o">.</span> <span class="nv">$jwtToken</span>
    <span class="p">));</span>
    <span class="nv">$response</span> <span class="o">=</span> <span class="nb">curl_exec</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>
    <span class="nv">$code</span> <span class="o">=</span> <span class="nb">curl_getinfo</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="nx">CURLINFO_HTTP_CODE</span><span class="p">);</span>
    <span class="nb">curl_close</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>

    <span class="k">if</span> <span class="p">(</span><span class="nv">$code</span> <span class="o">!==</span> <span class="mi">200</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">throw</span> <span class="k">new</span> <span class="nx">Exception</span><span class="p">(</span><span class="s1">'Response with error code '</span> <span class="o">.</span> <span class="nv">$code</span> <span class="o">.</span> <span class="s1">' received'</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span><span class="k">empty</span><span class="p">(</span><span class="nv">$response</span><span class="p">))</span> <span class="p">{</span>
        <span class="k">throw</span> <span class="k">new</span> <span class="nx">Exception</span><span class="p">(</span><span class="s1">'Empty response received'</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="nv">$response</span><span class="p">;</span>
<span class="p">}</span>
</code></pre>

<p>The Cloudbet API uses JSON Web Tokens or <a href="https://jwt.io">JWTs</a> to allow secure access to the API.</p>

<p>You can register for an API key at our <a href="https://affiliates.cloudbet.com/en/affiliates/sign_up">affiliate portal</a>.</p>

<p>Our API expects for the API key to be included in all API requests to the server in a HTTP header that looks like the following:</p>

<p><code class="prettyprint">Authorization: bearer TOKEN</code></p>

<aside class="notice">
You must replace <code>TOKEN</code> with your personal API key.
</aside>

          <h1 id="outright">Outright</h1>

<pre class="highlight php"><code><span class="cp">&lt;?php</span>

<span class="c1">// Outright
// Endpoint: /api/v2/sports/outright/&lt;outrightId&gt;
</span>
<span class="nv">$outright</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">\Sportsbook\Outright</span><span class="p">();</span>

<span class="k">try</span> <span class="p">{</span>
    <span class="nv">$outright</span><span class="o">-&gt;</span><span class="na">parseFromString</span><span class="p">(</span><span class="nx">getApiResponse</span><span class="p">(</span><span class="s1">'outright/'</span> <span class="o">.</span> <span class="nv">$outrightIds</span><span class="p">[</span><span class="nb">array_rand</span><span class="p">(</span><span class="nv">$outrightIds</span><span class="p">)]));</span>
<span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">Exception</span> <span class="nv">$e</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">die</span><span class="p">(</span><span class="s1">'Unable to get outright: '</span> <span class="o">.</span> <span class="nv">$e</span><span class="o">-&gt;</span><span class="na">getMessage</span><span class="p">()</span> <span class="o">.</span> <span class="nx">PHP_EOL</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">echo</span> <span class="s1">'Outright #'</span> <span class="o">.</span> <span class="nv">$outright</span><span class="o">-&gt;</span><span class="na">getId</span><span class="p">()</span> <span class="o">.</span> <span class="s1">': "'</span> <span class="o">.</span> <span class="nv">$outright</span><span class="o">-&gt;</span><span class="na">getName</span><span class="p">()</span> <span class="o">.</span> <span class="s1">'" for competition "'</span> <span class="o">.</span> <span class="nv">$outright</span><span class="o">-&gt;</span><span class="na">getCompetition</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">getName</span><span class="p">()</span> <span class="o">.</span> <span class="s1">'" with '</span> <span class="o">.</span> <span class="nb">count</span><span class="p">(</span><span class="nv">$outright</span><span class="o">-&gt;</span><span class="na">getSelections</span><span class="p">())</span> <span class="o">.</span> <span class="s1">' selections'</span> <span class="o">.</span> <span class="nx">PHP_EOL</span><span class="p">;</span>

</code></pre>

          <h1 id="errors">Errors</h1>

<p>The Sports API uses the following error codes:</p>

<table><thead>
<tr>
<th>Error Code</th>
<th>Meaning</th>
</tr>
</thead><tbody>
<tr>
<td>400</td>
<td>Bad Request &ndash; Your request is malformed</td>
</tr>
<tr>
<td>401</td>
<td>Unauthorized &ndash; Your API key is wrong</td>
</tr>
<tr>
<td>404</td>
<td>Not Found &ndash; The specified object was not found</td>
</tr>
<tr>
<td>405</td>
<td>Method Not Allowed &ndash; You tried to access an object with an invalid method</td>
</tr>
<tr>
<td>406</td>
<td>Not Acceptable &ndash; You requested a format that isn&rsquo;t json or protobuf</td>
</tr>
<tr>
<td>429</td>
<td>Too Many Requests &ndash; You&rsquo;re exceeding your the request rate limit! Slow down!</td>
</tr>
<tr>
<td>500</td>
<td>Internal Server Error &ndash; We had a problem with our server. Try again later.</td>
</tr>
<tr>
<td>503</td>
<td>Service Unavailable &ndash; We&rsquo;re temporarially offline for maintanance. Please try again later.</td>
</tr>
</tbody></table>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="php">php</a>
          </div>
      </div>
    </div>
  </body>
</html>
